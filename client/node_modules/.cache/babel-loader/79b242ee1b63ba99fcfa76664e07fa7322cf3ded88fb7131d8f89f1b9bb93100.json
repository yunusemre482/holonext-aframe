{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yunusemre/Desktop/Holonext/holonext-aframe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yunusemre/Desktop/Holonext/holonext-aframe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yunusemre/Desktop/Holonext/holonext-aframe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useCallback,useState}from'react';import'regenerator-runtime';import{createSpeechlySpeechRecognition}from'@speechly/speech-recognition-polyfill';import SpeechRecognition,{useSpeechRecognition}from'react-speech-recognition';import axios from'axios';import{Microphone,MicrophoneOff,Trash}from'tabler-icons-react';import Scene from'../components/SceneWithAr';import LoadingScreen from'../components/LoadingScreen';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var appId='01403d73-5ac1-47b5-a2aa-2059ec480d13';var SpeechlySpeechRecognition=createSpeechlySpeechRecognition(appId);SpeechRecognition.applyPolyfill(SpeechlySpeechRecognition);var DallE=function DallE(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useSpeechRecognition=useSpeechRecognition(),transcript=_useSpeechRecognition.transcript,listening=_useSpeechRecognition.listening,resetTranscript=_useSpeechRecognition.resetTranscript,browserSupportsSpeechRecognition=_useSpeechRecognition.browserSupportsSpeechRecognition,finalTranscript=_useSpeechRecognition.finalTranscript;var handleListen=function handleListen(){if(listening){SpeechRecognition.stopListening();}else{SpeechRecognition.startListening({continuous:true});}};var _useState3=useState(['https://plus.unsplash.com/premium_photo-1672287578296-21a2e3504bf9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3542&q=80','https://holonext.io/public/images/holonextlogo.jpg']),_useState4=_slicedToArray(_useState3,2),apiAnswer=_useState4[0],setApiAnswer=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(question){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.next=3;return axios.post('/api/v1/dall-e',{message:question,userId:1}).then(function(res){setApiAnswer(res.data.images);setIsLoading(false);});case 3:resetTranscript();case 4:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var defaultCommands=['cars and trucks and airplanes war','red bear walking on the grass','ducks fighting in the sky'];if(typeof window!=='undefined'&&!browserSupportsSpeechRecognition){return/*#__PURE__*/_jsx(\"span\",{children:\"Browser doesn't support speech recognition.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex  flex-col lg:flex-row overflow-auto\",children:[/*#__PURE__*/_jsx(Scene,{images:apiAnswer}),/*#__PURE__*/_jsxs(\"div\",{className:\"z-10 flex flex-col items-center justify-center bg-[rgba(102,138,255,0.5)]  mx-auto gap-4 w-[80%] lg:w-[clamp(200px,50%,800px)] p-5\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\" w-[90%] flex items-center lg:py-10  gap-2 flex flex-col hidden lg:flex \",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg mb-2 w-full\",children:\"Example Commands:\"}),defaultCommands.map(function(command,index){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return handleSubmit(command);},className:\"bg-blue-400 text-yellow-100 p-2 rounded-lg cursor-pointer  flex w-[45%] hover:bg-blue-700 lg:w-full\",children:command},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center lg:w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center relative flex-col  w-[85%] lg:w-full \",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg mb-2  w-[90%]\",children:\"Speak into the microphone:\"}),/*#__PURE__*/_jsx(\"textarea\",{defaultValue:transcript,onChange:function onChange(e){},disabled:true,id:\"speech-input\",className:\" w-[90%] h-20 lg:h-64 rounded-lg border-gray-400 border-2 px-4 py-2 mb-4 disabled:bg-white\"}),/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-12 right-8   bg-teal-600 p-2 rounded-md \",onClick:resetTranscript,children:/*#__PURE__*/_jsx(Trash,{size:20,color:'#ffffff'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex  justify-end items-center  gap-5 w-[90%] lg:w-full flex-row px-[2rem]\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleListen,id:\"start-recognition\",className:\"bg-blue-700 hover:bg-blue-800 text-white font-bold p-2 px-6  rounded flex flex-row items-center gap-4\",children:[listening?/*#__PURE__*/_jsx(MicrophoneOff,{size:20,strokeWidth:2,color:'#f5f5f5'}):/*#__PURE__*/_jsx(Microphone,{size:20,strokeWidth:2,color:'#f5f5f5'}),listening?'Stop Listening':'Start Listening']}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSubmit(finalTranscript);},id:\"start-recognition\",className:\" bg-slate-500 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded \",children:\"Submit Transcript\"})]})]})]}),/*#__PURE__*/_jsx(LoadingScreen,{isLoading:isLoading})]});};export default DallE;","map":{"version":3,"names":["React","useEffect","useCallback","useState","createSpeechlySpeechRecognition","SpeechRecognition","useSpeechRecognition","axios","Microphone","MicrophoneOff","Trash","Scene","LoadingScreen","jsx","_jsx","jsxs","_jsxs","appId","SpeechlySpeechRecognition","applyPolyfill","DallE","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useSpeechRecognition","transcript","listening","resetTranscript","browserSupportsSpeechRecognition","finalTranscript","handleListen","stopListening","startListening","continuous","_useState3","_useState4","apiAnswer","setApiAnswer","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","question","wrap","_callee$","_context","prev","next","post","message","userId","then","res","data","images","stop","_x","apply","arguments","defaultCommands","window","children","className","map","command","index","onClick","defaultValue","onChange","e","disabled","id","size","color","strokeWidth"],"sources":["/Users/yunusemre/Desktop/Holonext/holonext-aframe/client/src/pages/DallE.jsx"],"sourcesContent":["import React, { useEffect, useCallback, useState } from 'react';\nimport 'regenerator-runtime';\nimport { createSpeechlySpeechRecognition } from '@speechly/speech-recognition-polyfill';\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition';\nimport axios from 'axios';\nimport { Microphone, MicrophoneOff, Trash } from 'tabler-icons-react';\nimport Scene from '../components/SceneWithAr';\nimport LoadingScreen from '../components/LoadingScreen';\nconst appId = '01403d73-5ac1-47b5-a2aa-2059ec480d13';\nconst SpeechlySpeechRecognition = createSpeechlySpeechRecognition(appId);\nSpeechRecognition.applyPolyfill(SpeechlySpeechRecognition);\n\nconst DallE = () => {\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst {\n\t\ttranscript,\n\t\tlistening,\n\t\tresetTranscript,\n\t\tbrowserSupportsSpeechRecognition,\n\t\tfinalTranscript,\n\t} = useSpeechRecognition();\n\tconst handleListen = () => {\n\t\tif (listening) {\n\t\t\tSpeechRecognition.stopListening();\n\t\t} else {\n\t\t\tSpeechRecognition.startListening({ continuous: true });\n\t\t}\n\t};\n\n\tconst [apiAnswer, setApiAnswer] = useState([\n\t\t'https://plus.unsplash.com/premium_photo-1672287578296-21a2e3504bf9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3542&q=80',\n\t\t'https://holonext.io/public/images/holonextlogo.jpg',\n\t]);\n\tconst handleSubmit = async (question) => {\n\t\tsetIsLoading(true);\n\t\tawait axios\n\t\t\t.post('/api/v1/dall-e', {\n\t\t\t\tmessage: question,\n\t\t\t\tuserId: 1,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tsetApiAnswer(res.data.images);\n\t\t\t\tsetIsLoading(false);\n\t\t\t});\n\n\t\tresetTranscript();\n\t};\n\n\tconst defaultCommands = [\n\t\t'cars and trucks and airplanes war',\n\t\t'red bear walking on the grass',\n\t\t'ducks fighting in the sky',\n\t];\n\n\tif (typeof window !== 'undefined' && !browserSupportsSpeechRecognition) {\n\t\treturn <span>Browser doesn't support speech recognition.</span>;\n\t}\n\n\treturn (\n\t\t<div className='w-full h-full flex  flex-col lg:flex-row overflow-auto'>\n\t\t\t<Scene images={apiAnswer} />\n\t\t\t<div className='z-10 flex flex-col items-center justify-center bg-[rgba(102,138,255,0.5)]  mx-auto gap-4 w-[80%] lg:w-[clamp(200px,50%,800px)] p-5'>\n\t\t\t\t<ul className=' w-[90%] flex items-center lg:py-10  gap-2 flex flex-col hidden lg:flex '>\n\t\t\t\t\t<span className='text-lg mb-2 w-full'>Example Commands:</span>\n\n\t\t\t\t\t{defaultCommands.map((command, index) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tonClick={() => handleSubmit(command)}\n\t\t\t\t\t\t\tclassName='bg-blue-400 text-yellow-100 p-2 rounded-lg cursor-pointer  flex w-[45%] hover:bg-blue-700 lg:w-full'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{command}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<div className='flex flex-col items-center lg:w-full'>\n\t\t\t\t\t<div className='flex items-center relative flex-col  w-[85%] lg:w-full '>\n\t\t\t\t\t\t<span className='text-lg mb-2  w-[90%]'>Speak into the microphone:</span>\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tdefaultValue={transcript}\n\t\t\t\t\t\t\tonChange={(e) => {}}\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tid='speech-input'\n\t\t\t\t\t\t\tclassName=' w-[90%] h-20 lg:h-64 rounded-lg border-gray-400 border-2 px-4 py-2 mb-4 disabled:bg-white'\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='absolute top-12 right-8   bg-teal-600 p-2 rounded-md '\n\t\t\t\t\t\t\tonClick={resetTranscript}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Trash size={20} color={'#ffffff'} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='flex  justify-end items-center  gap-5 w-[90%] lg:w-full flex-row px-[2rem]'>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={handleListen}\n\t\t\t\t\t\t\tid='start-recognition'\n\t\t\t\t\t\t\tclassName='bg-blue-700 hover:bg-blue-800 text-white font-bold p-2 px-6  rounded flex flex-row items-center gap-4'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{listening ? (\n\t\t\t\t\t\t\t\t<MicrophoneOff size={20} strokeWidth={2} color={'#f5f5f5'} />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Microphone size={20} strokeWidth={2} color={'#f5f5f5'} />\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{listening ? 'Stop Listening' : 'Start Listening'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => handleSubmit(finalTranscript)}\n\t\t\t\t\t\t\tid='start-recognition'\n\t\t\t\t\t\t\tclassName=' bg-slate-500 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded '\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubmit Transcript\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<LoadingScreen isLoading={isLoading} />\n\t\t</div>\n\t);\n};\n\nexport default DallE;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}